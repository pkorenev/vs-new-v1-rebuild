  <style>
    /*.portfolio-item{
      z-index: 1;
    }

    .g4.portfolio-item{
      width:16.66666667% !important;
      height: auto !important;
      
      margin:0 !important;
      padding: 1px 1px 1px 1px !important;
      
    }
    .g4.portfolio-item img{
      max-width:100%;
      max-height: 100%;
      width: auto !important;
      position: absolute;
      height:auto !important;      
    }

    .g4.portfolio-item a{
      width:100%;
      height: 1px !important;
      padding-top: 100%;
    }


    #portfolio-container{
      width: 100%;
    }*/

    .portfolio-item{
      z-index: 1;
    }

    .no-js .g4.portfolio-item{
      width:16.6666667% !important;
    }

    .js .g4.portfolio-item{
      width:16.666667% !important;
    }

    .g4.portfolio-item{
      
      height: auto !important;
      
      margin:0 !important;
      padding: 1px 1px 1px 1px !important;
      z-index: 1 !important;

      /*position: relative;*/
    }
    .g4.portfolio-item img{
      max-width:100%;
      max-height: 100%;
      width: 100% !important;
      position: absolute;
      z-index: 1 !important;
      height:100% !important;      
    }

    .g4.portfolio-item figure{
      width:100% !important;
      height: 1px !important;
      padding-top: 100%;
      margin:0 !important;
      position: relative;
      z-index: 1 !important;
    }

    .g4.portfolio-item a{
      top:0 !important;
      width:100%;
      height: 100% !important;
      position: absolute;

      display: block;
      z-index: 3 !important;
    }


    #portfolio-container{
      width: 100%;
    }

    #portfolio-wrapper{
      padding-top:30px;
    }

    /* fix for opera */
    .g4.portfolio-item img{
      cursor:pointer;
    }

    .portfolio-item a .BWfade{
      z-index: 2 !important;
      cursor: pointer;
    }


  </style>
  <div id="portfolio-container" class="sortable-portfolio">
          <div class="g4 portfolio-item poly">
            <figure>
            <%= link_to(image_tag('p2-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item firm">
            <figure>
            <%= link_to(image_tag('p3-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item web">
            <figure>
            <%= link_to(image_tag('p4-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item poly">
            <figure>
            <%= link_to(image_tag('p4-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item firm">
            <figure>
            <%= link_to(image_tag('p5-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item web">
            <figure>
            <%= link_to(image_tag('p6-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item poly">
            <figure>
            <%= link_to(image_tag('p7-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item firm">
            <figure>
            <%= link_to(image_tag('p1-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item web">
            <figure>
            <%= link_to(image_tag('p2-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item poly">
            <figure>
            <%= link_to(image_tag('p3-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item firm">
            <figure>
            <%= link_to(image_tag('p5-c.jpg'), '#') %>
            </figure>
          </div>
          <div class="g4 portfolio-item web">
            <figure>
            <%= link_to(image_tag('p6-c.jpg'), '#') %>
            </figure>
          </div>

          
  </div>
  <script type="text/javascript" charset="utf-8">
    /*$(document).ready(function() {
      $("#all-port").click(function(){
        $(this).toggleClass("inactive-portfolio");
        $("firm-port").toggleClass("inactive-portfolio");
        $("poly-port").toggleClass("inactive-portfolio");
        $("web-port").toggleClass("inactive-portfolio");
      });

      $("#firm-port").click(function(){
        $(this).toggleClass("inactive-portfolio");
        $("all-port").toggleClass("inactive-portfolio");
        $("poly-port").toggleClass("inactive-portfolio");
        $("web-port").toggleClass("inactive-portfolio");
      });

      $("#poly-port").click(function(){
        $(this).toggleClass("inactive-portfolio");
        $("firm-port").toggleClass("inactive-portfolio");
        $("all-port").toggleClass("inactive-portfolio");
        $("web-port").toggleClass("inactive-portfolio");
      });

      $("#web-port").click(function(){
        $(this).toggleClass("inactive-portfolio");
        $("firm-port").toggleClass("inactive-portfolio");
        $("poly-port").toggleClass("inactive-portfolio");
        $("all-port").toggleClass("inactive-portfolio");
      });
    });*/
  </script>
  <div id="portfolio-wrapper">
    <section class="container">
      <section class="f-height">
        <div class="g3 portfolio-tab" id="all-port">
          <p>Усі види</p>
        </div>
        <div class="g3 portfolio-tab inactive-portfolio" id="firm-port">
          <p>Фірмові стилі</p>
        </div>
        <div class="g3 portfolio-tab inactive-portfolio" id="poly-port">
          <p>Поліграфія</p>
        </div>
        <div class="g3 portfolio-tab inactive-portfolio" id="web-port">
          <p>Веб</p>
        </div>
      </section>
    </section>
  </div>

<script type="text/javascript">

  

  // Bind tabs
  $(document).on('ready page:load', function(){

    var $container = $('.sortable-portfolio');

    function handleWindowResize(){
        //$container.isotope({
          // update columnWidth to a percentage of container width
          //masonry: { columnWidth: $container.width() / 7 }

        //});
      var container_isotope_data = $container.data('isotope');
      var item = container_isotope_data.$filteredAtoms[0];
      var $item = $(item);
      var item_height = $item.outerHeight(true);
      var item_width = $item.outerHeight(true);
      container_height = Math.ceil(container_isotope_data.$filteredAtoms.length / 6) * item_height;
      $container.css('height',''+container_height+'px');

      var $filtered_items = $(container_isotope_data.$filteredAtoms);
      $filtered_items.each(function(index){
        var $item = $(this);
        var item_left = (index%6) * item_width;
        var item_top = Math.floor( (index) / 6 ) * item_height;

        $item.css({left:item_left,top:item_top});
      });
    }
      
      $(window).smartresize(handleWindowResize);

      visualizePortfolioShowAll();
      handleWindowResize.call($(window));
    $("#all-port").click(visualizePortfolioShowAll);

      $("#firm-port").click(visualizePortfolioShowFirmStyles);

      $("#poly-port").click(visualizePortfolioShowPolygraphy);

      $("#web-port").click(visualizePortfolioShowWeb);
  });

  //$(window).load(function(){
    $('.portfolio-item a').BlackAndWhite({
        hoverEffect : true, // default true
        // set the path to BnWWorker.js for a superfast implementation
        webworkerPath : false,
        // for the images with a fluid width and height 
        responsive:true,
        // to invert the hover effect
        invertHoverEffect: false,
        // this option works only on the modern browsers ( on IE lower than 9 it remains always 1)
        intensity:1,
        speed: { //this property could also be just speed: value for both fadeIn and fadeOut
            fadeIn: 200, // 200ms for fadeIn animations
            fadeOut: 800 // 800ms for fadeOut animations
        },
        onImageReady:function(img) {
          // this callback gets executed anytime an image is converted
        }
    });
//});
</script>
